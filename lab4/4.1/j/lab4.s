	AREA RESET, DATA, READONLY
	    DCD 0x20001000
	    DCD Reset_Handler
	ALIGN
SLPT DCD 4 
CHUOI DCD 2,4,6,8
	AREA KETQUA, DATA, READWRITE
KQ DCD 0
	AREA MYCODE, CODE, READONLY
	EXPORT Reset_Handler
	ENTRY
Reset_Handler
	
	LDR R1, =CHUOI; DIA CHI CUA CHUOI
	LDR R6, SLPT	;PT CUA CHUOI
	MOV R2, #4; BIEN TANG
	MOV R3, #0; BIEN TRUNG GIAN
	LDR R4, CHUOI; PHAN TU DAU TIEN CUA CHUOI
	SUB R6, #1
LOOP10
	CMP R6, #0	;KIEM TRA R0 VOI K DE KET THUC
	BEQ STOP
	LDR R5, [R1,R2]; GIA TIEP THEO CUA CHUOI
	CMP R4, R5	;KIEM TRA VOI SO DAU TIEN
	BLT HOANDOI	;NEU NHO HON THI HOAN DOI
	B TIMUCLN10
HOANDOI	; HOAN DOI R4 VOI R5
	MOV R3, R4
	MOV R4, R5
	MOV R5, R3
	 ;HOAN DOI XONG TU XUONG TIM UCLN
TIMUCLN10
	SUB R4, R5
	CMP R4, R5
	BHS TIMUCLN10; LON HON HOAC BANG THI TIEP TUC TRU
	B HOANDOI2	;R4 < R5 THI TA HOAN DOI TIEP
HOANDOI2
	MOV R3, R4
	MOV R4, R5
	MOV R5, R3
	CMP R5, #0; > 0 THI TIEP TUC
	BGT TIMUCLN10
	B TIEP10
TIEP10
	ADD R2, #4; TANG OFFSET
	SUB R6, #1
	B LOOP10
STOP
	LDR R7,=KQ
	STR R4,[R7]
	B STOP
	END